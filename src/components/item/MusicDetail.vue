<template>
  <img :src="musicList.al.picUrl" alt="" class="bgimg" />
  <div class="detailTop">
    <div class="detailTopLeft">
      <svg t="1666770886096" class="icon back" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="23705" width="200" height="200" @click="backHome">
        <!-- 点击返回首页 -->
        <path
          d="M862.485 481.154H234.126l203.3-203.3c12.497-12.497 12.497-32.758 0-45.255s-32.758-12.497-45.255 0L135.397 489.373c-12.497 12.497-12.497 32.758 0 45.254l256.774 256.775c6.249 6.248 14.438 9.372 22.627 9.372s16.379-3.124 22.627-9.372c12.497-12.497 12.497-32.759 0-45.255l-203.3-203.301h628.36c17.036 0 30.846-13.81 30.846-30.846s-13.81-30.846-30.846-30.846z"
          fill="" p-id="23706">
        </path>
      </svg>

      <div class="leftMarquee">
        <Vue3Marquee style="color: #fff">{{ musicList.al.name }}</Vue3Marquee>
        <span v-for="item in musicList.ar " :key="item">
          {{ item.name }}
        </span>
        <svg t="1666773745260" class="icon list" viewBox="0 0 1024 1024" version="1.1"
          xmlns="http://www.w3.org/2000/svg" p-id="25397" width="200" height="200">
          <path
            d="M711.6 488.624L355.2 152.976a29.36 29.36 0 0 0-42.352 0 31.408 31.408 0 0 0 0 43.552L647.76 512 312.848 827.36a31.408 31.408 0 0 0 0 43.552 29.36 29.36 0 0 0 42.352 0l356.4-335.648a36.32 36.32 0 0 0 0-46.64z"
            p-id="25398"></path>
        </svg>
      </div>
    </div>

    <div class="detailTopRight">
      <svg t="1666774047550" class="icon share" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="29713" width="200" height="200">
        <path
          d="M817.491 614.307c-55.693 0-109.705 35.668-140.704 77.021L431.985 575.543c4.879-17.462 11.64-44.182 11.64-63.199s-4.555-43.95-9.435-61.407l241.495-117.991c30.999 41.353 86.113 77.433 141.807 77.433 93.866 0 169.938-76.074 169.938-169.94 0-93.865-76.072-169.938-169.938-169.938s-169.938 76.073-169.938 169.938c0 13.841 2.123 27.087 5.21 39.966L407.081 396.006c-36.843-52.907-98.014-87.589-167.384-87.589-112.654 0-203.928 91.274-203.928 203.927 0 112.649 91.274 203.929 203.928 203.929 69.371 0 130.542-34.688 167.384-87.597l245.682 115.608c-3.087 12.88-5.21 26.121-5.21 39.961 0 93.866 76.072 169.942 169.938 169.942S987.43 878.111 987.43 784.245C987.43 690.383 911.357 614.307 817.491 614.307zM817.491 119.142c66.887 0 121.301 54.411 121.301 121.296 0 66.892-54.414 121.301-121.301 121.301-66.885 0-121.294-54.409-121.294-121.301C696.197 173.553 750.606 119.142 817.491 119.142zM239.697 666.722c-85.107 0-154.377-69.271-154.377-154.378 0-85.106 69.27-154.382 154.377-154.382 85.107 0 154.377 69.276 154.377 154.382C394.074 597.451 324.804 666.722 239.697 666.722zM817.491 905.546c-66.885 0-121.294-54.41-121.294-121.301 0-66.887 54.409-121.297 121.294-121.297 66.887 0 121.301 54.41 121.301 121.297C938.792 851.136 884.378 905.546 817.491 905.546z"
          p-id="29714"></path>
        <path d="M650.299 681.865" p-id="29715"></path>
      </svg>

    </div>
  </div>

  <div class="detailContent" v-show="!isLyricShow">
    <!-- 根据播放状态切换样式 -->
    <img src="@/assets/needle.png" alt="" class="img_needle" :class="{ img_needle_active: !isbtnShow }">
    <img src="@/assets/cd.png" alt="" class="img_cd">
    <img :src="musicList.al.picUrl" alt="" class="img_ar"
      :class="{ img_ar_active: !isbtnShow, img_ar_paused: isbtnShow }" @click="isLyricShow = true">
  </div>

  <div class="musicLyric" ref="musicLyric" v-show="isLyricShow" @click="isLyricShow = false">
    <!-- 时间判断 -->
    <p v-for="item in lyric" :key="item"
      :class="{ active: (currentTime * 1000) >= item.time && (currentTime * 1000) < item.pre }">
      {{ item.lrc }}
    </p>
  </div>

  <div class="detailFooter">
    <div class="footerTop">
      <svg t="1666937178373" class="icon heart" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="5957" width="200" height="200">
        <path
          d="M667.786667 117.333333C832.864 117.333333 938.666667 249.706667 938.666667 427.861333c0 138.250667-125.098667 290.506667-371.573334 461.589334a96.768 96.768 0 0 1-110.186666 0C210.432 718.368 85.333333 566.112 85.333333 427.861333 85.333333 249.706667 191.136 117.333333 356.213333 117.333333c59.616 0 100.053333 20.832 155.786667 68.096C567.744 138.176 608.170667 117.333333 667.786667 117.333333z m0 63.146667c-41.44 0-70.261333 15.189333-116.96 55.04-2.165333 1.845333-14.4 12.373333-17.941334 15.381333a32.32 32.32 0 0 1-41.770666 0c-3.541333-3.018667-15.776-13.536-17.941334-15.381333-46.698667-39.850667-75.52-55.04-116.96-55.04C230.186667 180.48 149.333333 281.258667 149.333333 426.698667 149.333333 537.6 262.858667 675.242667 493.632 834.826667a32.352 32.352 0 0 0 36.736 0C761.141333 675.253333 874.666667 537.6 874.666667 426.698667c0-145.44-80.853333-246.218667-206.88-246.218667z"
          p-id="5958"></path>
      </svg>
      <svg t="1666937273512" class="icon download" viewBox="0 0 1024 1024" version="1.1"
        xmlns="http://www.w3.org/2000/svg" p-id="9310" width="200" height="200">
        <path
          d="M551.783587 591.158874 551.783587 249.237481 472.216413 249.237481 472.216413 591.160921 336.806397 455.740672 280.542976 512.00921 511.995395 743.448326 743.454978 512.00921 687.192579 455.740672Z"
          p-id="9311"></path>
        <path
          d="M982.400045 313.280076c-25.713638-60.794621-62.521962-115.3921-109.403712-162.27385-46.880727-46.879704-101.477182-83.691097-162.272827-109.403712-62.950727-26.626427-129.811508-40.126906-198.727087-40.126906-68.915579 0-135.778406 13.500479-198.72811 40.126906-60.794621 25.712615-115.390054 62.524009-162.269757 109.403712-46.879704 46.88175-83.687004 101.479229-109.400642 162.27385-26.624381 62.951751-40.123836 129.813554-40.123836 198.727087 0 68.915579 13.499455 135.77636 40.123836 198.72504 25.713638 60.794621 62.520939 115.390054 109.400642 162.269757 46.879704 46.87868 101.475136 83.687004 162.269757 109.399619 62.949704 26.624381 129.811508 40.122813 198.72811 40.122813s135.777383-13.498432 198.727087-40.122813c60.795645-25.712615 115.3921-62.521962 162.272827-109.399619 46.880727-46.879704 83.689051-101.475136 109.403712-162.269757 26.625404-62.949704 40.124859-129.810484 40.124859-198.72504C1022.525927 443.093631 1009.025449 376.230804 982.400045 313.280076zM679.751097 909.096017c-53.122895 22.468734-109.563348 33.861202-167.754678 33.861202-58.182121 0-114.617457-11.392468-167.738305-33.861202-51.316759-21.703301-97.407494-52.780087-136.993071-92.363617-39.585577-39.58353-70.663386-85.672218-92.368734-136.986931-22.470781-53.119825-33.864272-109.556185-33.864272-167.738305 0-58.18826 11.394515-114.63076 33.864272-167.754678 21.705348-51.316759 52.783157-97.40954 92.368734-136.995117 39.584554-39.58353 85.675288-70.660316 136.992047-92.365664 53.120848-22.468734 109.556185-33.861202 167.738305-33.861202 58.19133 0 114.631784 11.392468 167.754678 33.861202 51.316759 21.705348 97.40647 52.782134 136.988977 92.365664s70.656223 85.676311 92.360548 136.995117c22.466688 53.121871 33.858132 109.563348 33.858132 167.754678 0 58.184167-11.391445 114.620527-33.858132 167.738305-21.704324 51.316759-52.77804 97.40647-92.359524 136.986931C777.157567 856.314906 731.067856 887.392716 679.751097 909.096017z"
          p-id="9312"></path>
      </svg>
      <svg t="1666937441063" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="10451" width="200" height="200">
        <path d="M453.7 570m-378.2 0a378.2 378.2 0 1 0 756.4 0 378.2 378.2 0 1 0-756.4 0Z" fill="#43D8D6" p-id="10452">
        </path>
        <path d="M453.7 570m-213 0a213 213 0 1 0 426 0 213 213 0 1 0-426 0Z" fill="#2D415C" p-id="10453"></path>
        <path d="M453.7 570m-150.6 0a150.6 150.6 0 1 0 301.2 0 150.6 150.6 0 1 0-301.2 0Z" fill="#54B0E6" p-id="10454">
        </path>
        <path
          d="M453.7 732c-89.3 0-162-72.7-162-162s72.7-162 162-162 162 72.7 162 162-72.7 162-162 162z m0-301.3c-76.8 0-139.3 62.5-139.3 139.3s62.5 139.3 139.3 139.3S593.1 646.9 593.1 570s-62.5-139.3-139.4-139.3z"
          fill="#2D415C" p-id="10455"></path>
        <path d="M453.7 570m-47.8 0a47.8 47.8 0 1 0 95.6 0 47.8 47.8 0 1 0-95.6 0Z" fill="#FDD65D" p-id="10456"></path>
        <path
          d="M453.7 629.2c-32.6 0-59.2-26.5-59.2-59.2 0-32.6 26.5-59.2 59.2-59.2 32.6 0 59.2 26.5 59.2 59.2 0 32.6-26.5 59.2-59.2 59.2z m0-95.7c-20.1 0-36.5 16.4-36.5 36.5s16.4 36.5 36.5 36.5 36.5-16.4 36.5-36.5c0.1-20.1-16.3-36.5-36.5-36.5z"
          fill="#2D415C" p-id="10457"></path>
        <path
          d="M581.6 834.2l-15.4-26.6c-0.5-0.9-0.2-2.1 0.7-2.6l75.5-43.6c0.9-0.5 2.1-0.2 2.6 0.7l15.4 26.6c0.5 0.9 0.2 2.1-0.7 2.6l-75.5 43.6c-0.9 0.5-2.1 0.2-2.6-0.7z"
          fill="#54B0E6" p-id="10458"></path>
        <path d="M869 220.6m-80.1 0a80.1 80.1 0 1 0 160.2 0 80.1 80.1 0 1 0-160.2 0Z" fill="#54B0E6" p-id="10459">
        </path>
        <path
          d="M869 129.2c-50.4 0-91.4 41-91.4 91.4 0 38 23.4 70.7 56.5 84.5-4.1 17.1-13.4 55.4-25.4 104.5-61.3-135-197.3-229-354.9-229C239 180.5 64.2 355.2 64.2 570S239 959.6 453.7 959.6c214.8 0 389.5-174.7 389.5-389.5 0-43.3-7.1-85-20.2-124 15.2-61.8 27.6-113.4 32.8-135 4.3 0.6 8.6 0.9 13.1 0.9 50.4 0 91.4-41 91.4-91.4 0.1-50.4-40.9-91.4-91.3-91.4zM453.7 936.9C251.4 936.9 86.8 772.3 86.8 570s164.6-366.9 366.9-366.9c159.2 0 295.1 101.9 345.7 244-23.9 97.3-51.9 209.2-61.7 239.5-13.8 42.3-64.4 66-81.6 72.9-6.1-7.3-16.7-9.4-25.2-4.5L567 791.8c-9.5 5.5-12.8 17.7-7.3 27.1l8.7 15.1c3.7 6.4 10.4 9.9 17.2 9.9 3.4 0 6.8-0.9 9.9-2.7l63.9-36.9c4.6-2.7 7.9-6.9 9.3-12.1 1.2-4.4 0.8-9-1-13.2 22.5-9.4 75.5-36.3 91.5-85.6 8.8-27.2 31.3-115.9 52.8-202.8 5.6 25.5 8.6 52 8.6 79.2 0.1 202.5-164.5 367.1-366.9 367.1z m192.2-150.7l-59.2 34.2-6-10.3 59.2-34.2 6 10.3zM869 289.3c-37.9 0-68.8-30.9-68.8-68.8s30.9-68.8 68.8-68.8 68.8 30.9 68.8 68.8-30.9 68.8-68.8 68.8z"
          fill="#2D415C" p-id="10460"></path>
        <path d="M869 220.6m-28.8 0a28.8 28.8 0 1 0 57.6 0 28.8 28.8 0 1 0-57.6 0Z" fill="#43D8D6" p-id="10461"></path>
        <path
          d="M869 260.6c-22.1 0-40.1-18-40.1-40.1s18-40.1 40.1-40.1 40.1 18 40.1 40.1-18 40.1-40.1 40.1z m0-57.5c-9.6 0-17.4 7.8-17.4 17.4S859.3 238 869 238c9.6 0 17.4-7.8 17.4-17.4s-7.8-17.5-17.4-17.5z"
          fill="#2D415C" p-id="10462"></path>
      </svg>
      <svg t="1666937479312" class="icon comment" viewBox="0 0 1025 1024" version="1.1"
        xmlns="http://www.w3.org/2000/svg" p-id="12186" width="200" height="200">
        <path
          d="M512.001024 895.995648c-32.743489 0-64.663681-2.95527-95.699135-8.093712L191.998336 1024 191.998336 797.421115C75.051158 715.310487 0 589.403291 0 448.002944 0 200.575377 229.233098 0 512.001024 0c282.769974 0 512.001024 200.575377 512.001024 448.002944C1024.002048 695.424367 794.773046 895.995648 512.001024 895.995648zM512.001024 64.004224c-247.423471 0-448.000896 171.921752-448.000896 383.99872 0 130.115844 75.696279 244.92081 191.205758 314.368629l-2.019332 148.433193 150.638893-90.546357c34.703429 7.387151 70.803598 11.743255 108.173528 11.743255 247.425519 0 448.000896-171.921752 448.000896-383.99872S759.426543 64.004224 512.001024 64.004224zM736.001472 416.000832l-448.000896 0c-17.672227 0-32.000064-14.325789-32.000064-31.998016s14.327837-32.002112 32.000064-32.002112l448.000896 0c17.672227 0 32.002112 14.329885 32.002112 32.002112S753.673699 416.000832 736.001472 416.000832zM352.000704 544.005184l320.00064 0c17.672227 0 32.000064 14.319645 32.000064 31.998016 0 17.668131-14.327837 31.991872-32.000064 31.991872l-320.00064 0c-17.674275 0-32.000064-14.323741-32.000064-31.991872C320.00064 558.324829 334.326429 544.005184 352.000704 544.005184z"
          p-id="12187"></path>
      </svg>
      <svg t="1666937656557" class="icon xxx" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="21713" width="200" height="200">
        <path
          d="M179.3 706.9c6.7-11.6 7.2-25.8 1.5-37.9-9.3-19.6-16.9-40.1-22.7-61.4-12.5-45.9-15.9-92.9-10.3-139.9 5.9-48.5 21.3-94.9 45.8-137.8s56.7-79.6 95.6-109.2c37.6-28.6 79.9-49.5 125.8-61.9s93-15.9 140-10.3c43.3 5.2 84.8 18.1 123.7 38.2l-11.2 19.6c-8.7 15.1 4.8 35.4 24.3 36.5l71.9 4 71.9 4c18.1 1 29.5-19 19.5-34.1l-39.9-60-39.9-60c-10.8-16.2-35.1-17.6-43.8-2.5l-12 21c-212.3-111.6-476.8-35.9-597 174C46.7 421.5 45.8 576.1 106.6 704c14.2 30 56.2 31.7 72.7 2.9zM843.4 316.5c-6.7 11.6-7.2 25.8-1.5 37.9 9.3 19.6 16.9 40.1 22.7 61.4 12.5 45.9 15.9 92.9 10.3 139.9-5.9 48.5-21.3 94.9-45.8 137.8-24.6 42.9-56.7 79.6-95.6 109.2-37.6 28.6-79.9 49.5-125.8 61.9-45.9 12.5-92.9 15.9-139.9 10.3-43.3-5.2-84.8-18.1-123.7-38.2l11.2-19.6c8.7-15.1-4.8-35.4-24.3-36.5l-71.9-4-71.9-4c-18.1-1-29.5 19-19.5 34.1l39.9 60 39.9 60c10.8 16.2 35.1 17.6 43.8 2.5l12-21c212.3 111.9 476.8 36.2 597-173.7 75.8-132.3 76.7-286.9 15.9-414.8-14.3-30.3-56.3-32-72.8-3.2z"
          p-id="21714"></path>
      </svg>

    </div>

    <div class="footerContent"></div>

    <div class="footer">
      <svg t="1666938069331" class="icon loop" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="35829" width="200" height="200">
        <path
          d="M659.63 879.59H364.29c-40.13 0-79.07-8.3-115.72-24.67-35.3-15.76-66.97-38.3-94.14-66.99-55.64-58.75-86.28-136.77-86.28-219.7 0-82.92 30.64-160.94 86.28-219.7 27.17-28.69 58.84-51.23 94.14-67 36.65-16.37 75.58-24.67 115.72-24.67h295.34c10.15 0 20.37 0.54 30.38 1.62 13.18 1.41 22.72 13.24 21.3 26.42s-13.24 22.72-26.42 21.3c-8.31-0.89-16.81-1.34-25.26-1.34H364.29c-66.03 0-128.18 27.23-175.01 76.67-47.16 49.8-73.13 116.1-73.13 186.69s25.97 136.89 73.13 186.69c46.82 49.44 108.97 76.67 175.01 76.67h295.34c66.03 0 128.18-27.23 175.01-76.67 47.16-49.8 73.13-116.1 73.13-186.69 0-13.25 10.75-24 24-24s24 10.75 24 24c0 82.92-30.64 160.94-86.28 219.69-27.17 28.69-58.84 51.23-94.14 67-36.65 16.38-75.59 24.68-115.72 24.68z"
          p-id="35830"></path>
        <path
          d="M896.94 260.76l-185.33-107c-15.48-8.94-34.83 2.23-34.83 20.11v214c0 17.88 19.35 29.05 34.83 20.11l185.33-107c15.48-8.94 15.48-31.28 0-40.22z"
          p-id="35831"></path>
      </svg>
      <svg t="1666938128918" class="icon last" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="36430" width="200" height="200" @click="goPlay(-1)">
        <path
          d="M803.584 134.592c-18.176-10.048-39.936-10.112-58.112 0L192 443.008l0-282.88c0-17.664-14.336-32-32-32S128 142.464 128 160.128l0 344.896C127.744 507.2 127.104 509.248 127.104 511.488S127.744 515.84 128 518.016l0 346.112c0 17.664 14.336 32 32 32s32-14.336 32-32L192 579.968l553.408 308.352C754.56 893.44 764.48 896 774.528 896s19.968-2.56 29.056-7.616c18.176-10.112 28.992-28.224 28.992-48.576L832.576 183.104C832.576 162.88 821.76 144.768 803.584 134.592zM768.192 829.248 198.016 511.488 771.328 192 768.192 829.248z"
          p-id="36431"></path>
      </svg>

      <svg t="1666938906400" class="icon play" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="45713" width="200" height="200" v-if="!isbtnShow" @click="play">
        <path
          d="M512 1024C228.266667 1024 0 795.733333 0 512S228.266667 0 512 0s512 228.266667 512 512-228.266667 512-512 512z m0-42.666667c260.266667 0 469.333333-209.066667 469.333333-469.333333S772.266667 42.666667 512 42.666667 42.666667 251.733333 42.666667 512s209.066667 469.333333 469.333333 469.333333z m-106.666667-682.666666c12.8 0 21.333333 8.533333 21.333334 21.333333v384c0 12.8-8.533333 21.333333-21.333334 21.333333s-21.333333-8.533333-21.333333-21.333333V320c0-12.8 8.533333-21.333333 21.333333-21.333333z m213.333334 0c12.8 0 21.333333 8.533333 21.333333 21.333333v384c0 12.8-8.533333 21.333333-21.333333 21.333333s-21.333333-8.533333-21.333334-21.333333V320c0-12.8 8.533333-21.333333 21.333334-21.333333z"
          p-id="45714"></path>
      </svg>
      <svg t="1666938256771" class="icon play" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="38130" width="200" height="200" v-else @click="play">
        <path
          d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m0 981.333333C253.866667 981.333333 42.666667 770.133333 42.666667 512S253.866667 42.666667 512 42.666667s469.333333 211.2 469.333333 469.333333-211.2 469.333333-469.333333 469.333333z"
          p-id="38131"></path>
        <path
          d="M672 441.6l-170.666667-113.066667c-57.6-38.4-106.666667-12.8-106.666666 57.6v256c0 70.4 46.933333 96 106.666666 57.6l170.666667-113.066666c57.6-42.666667 57.6-106.666667 0-145.066667z"
          p-id="38132"></path>
      </svg>

      <svg t="1666938229096" class="icon next" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="37208" width="200" height="200" @click="goPlay(1)">
        <path
          d="M832 160.128c0-17.664-14.336-32-32-32S768 142.464 768 160.128l0 282.88L214.592 134.592c-18.176-10.112-39.936-10.048-58.112 0C138.24 144.768 127.424 162.88 127.424 183.168l0 656.64c0 20.224 10.816 38.464 29.056 48.576C165.568 893.44 175.488 896 185.472 896s19.968-2.56 29.056-7.616L768 579.968l0 284.096c0 17.664 14.336 32 32 32s32-14.336 32-32L832 160.128zM191.808 829.248 188.672 192l573.312 319.488L191.808 829.248z"
          p-id="37209"></path>
      </svg>
      <svg t="1666938317569" class="icon" viewBox="0 0 1034 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="41348" width="200" height="200">
        <path
          d="M302.638545 932.677818v-93.090909h709.02691v93.090909z m0-297.472v-93.090909h709.02691v93.090909z m-256-291.467636L115.432727 281.041455l98.071273 107.706181 261.678545-295.610181 69.818182 61.672727-330.472727 373.201454z m592.663273-6.050909v-93.090909h372.363637v93.090909z"
          p-id="41349"></path>
      </svg>

    </div>
  </div>

</template>


<script>
import { Vue3Marquee } from "vue3-marquee";
import "vue3-marquee/dist/style.css";
import { mapMutations, mapState } from "vuex";

export default {
  data() {
    return {
      // 切换
      isLyricShow: false
    }
  },
  computed: {
    ...mapState(['lyricList', 'currentTime', 'playListIndex', 'playList']),
    lyric: function () {
      let arr;
      if (this.lyricList.lyric) {
        // 换行符切割
        arr = this.lyricList.lyric.split(/[(\r\n)\r\n]+/).map((item, i) => {
          let min = item.slice(1, item.indexOf(':'))
          let sec = item.slice(item.indexOf(':') + 1, item.indexOf('.'))
          let mill = item.slice(item.indexOf('.') + 1, item.indexOf(']'))
          let lrc = item.slice(item.indexOf(']') + 1)
          let time = parseInt(min) * 60 * 1000 + parseInt(sec) * 1000 + parseInt(mill)
          return { min, sec, mill, lrc, time }
        })

        arr.forEach((item, i) => {
          if (i === arr.length - 1) {
            item.pre = 0
          } else {
            item.pre = arr[i + 1].time
          }
        });
      }
      // console.log(arr);
      return arr
    }
  },
  mounted() {
    console.log(this.lyricList.lyric);
  },
  // 从父级传来
  props: ['musicList', 'isbtnShow', 'play'],
  watch: {
    currentTime: function () {
      let p = document.querySelector("p.active")
      if (p.offsetTop > 300) {
        this.$refs.musicLyric.scrollTop = p.offsetTop - 300
      }
    }
  },
  components: {
    Vue3Marquee
  },
  methods: {
    backHome: function () {
      this.isLyricShow = false
      this.updateDetailShow()
    },
    //  切换上下首（循环）
    goPlay: function (num) {
      let index = this.playListIndex + num
      if (index < 0) {
        index = this.playList.length - 1
      } else if (index == this.playList.length) {
        index = 0
      }
      this.updatePlayListIndex(index)
    },
    ...mapMutations(['updateDetailShow', 'updatePlayListIndex'])
  }
}
</script>


<style lang="less" scoped>
.bgimg {
  width: 100%;
  height: 100%;
  position: absolute;
  z-index: -1;
  filter: blur(70px);
}

.detailTop {
  width: 100%;
  height: 1rem;
  display: flex;
  padding: 0.2rem;
  justify-content: space-between;
  align-items: center;
  fill: #fff;

  .detailTopLeft {
    display: flex;
    align-items: center;

    .leftMarquee {
      width: 3rem;
      height: 100%;
      margin-left: 0.4rem;

      span {
        color: #999;
      }

      .icon {
        width: 0.3rem;
        height: 0.3rem;
        fill: #999;
      }
    }
  }
}

.detailContent {
  width: 100%;
  height: 9rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;

  .img_needle {
    width: 2rem;
    height: 3rem;
    position: absolute;
    left: 46%;
    transform-origin: 0 0;
    transform: rotate(-13deg);
    transition: all 2s;
  }

  .img_needle_active {
    width: 2rem;
    height: 3rem;
    position: absolute;
    left: 46%;
    transform-origin: 0 0;
    transform: rotate(0deg);
    transition: all 2s;
  }

  .img_cd {
    width: 5rem;
    height: 5rem;
    position: absolute;
    bottom: 2.3rem;
    z-index: -1;
  }

  .img_ar {
    width: 3.2rem;
    height: 3.2rem;
    border-radius: 50%;
    position: absolute;
    bottom: 3.14rem;
    animation: rotate_ar 10s linear infinite;
  }

  .img_ar_active {
    animation-play-state: running;
  }

  .img_ar_paused {
    animation-play-state: paused;
  }

  // 动画
  @keyframes rotate_ar {
    0% {
      transform: rotateZ(0deg);
    }

    100% {
      transform: rotateZ(360deg);
    }
  }
}

.musicLyric {
  width: 100%;
  height: 8rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: .2rem;
  overflow: scroll; // 溢出滚动
  scroll-behavior: smooth;

  p {
    color: rgb(197, 194, 194);
    margin-bottom: .4rem;
  }

  .active {
    color: #fff;
    font-size: .5rem;
  }
}

.detailFooter {
  width: 100%;
  height: 3rem;
  position: absolute;
  bottom: 0.2rem;
  display: flex;
  flex-direction: column;
  justify-content: space-between;

  .footerTop {
    width: 100%;
    height: 1rem;
    display: flex;
    justify-content: space-around;
    align-items: center;

    .icon {
      width: 0.36rem;
      height: 0.36rem;
      fill: rgb(245, 234, 234);
    }

    .icon {
      width: 0.55rem;
      height: 0.55rem;
    }
  }

  .range {
    width: 100%;
    height: 0.06rem;
  }

  .footer {
    width: 100%;
    height: 1rem;
    display: flex;
    justify-content: space-around;
    align-items: center;

    .icon {
      fill: rgb(245, 234, 234);
    }

    .play {
      width: 1rem;
      height: 1rem;
    }
  }
}
</style>